<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Incremental Poker</title>
            <style>
                html{
                    height: 100%;
                }

                body {
                    position: absolute;
                    background-image: linear-gradient(to right, rgb(240,240,240), rgb(40,40,40));
                    width: 99%;
                    padding-top: 42%;
                }

                img {
                    -webkit-filter: drop-shadow(5px 5px 5px rgb(0,0,0,0.4));
                }

                #left-frame {
                    top: 0;
                    position: absolute;
                    width: 60%;
                    padding-top: 43%;
                    text-align: center;
                }
                #right-frame {
                    top: 0;
                    right: 0;
                    position: absolute;
                    width: 37.6%;
                    margin-right: 2%;
                    padding-top: 43%;
                    text-align: center;
                }

                #upgrades-container {
                    position: absolute;
                    top: 0;
                    width: 100%;
                    padding-top: 70%;
                }

                .each-upgrade {
                    position: absolute;
                    top: 0;
                    width: 99%;
                    padding-top: 10%;
                }

                #upgrade-heading {
                    top: 0;
                }

                #upgrade-1{
                    top: 16.66%;
                }

                #upgrade-2{
                    top: 33.33%;
                }

                #upgrade-3{
                    top: 50%;
                }

                #upgrade-4{
                    top: 66.66%;
                }

                #upgrade-5{
                    top: 83.33%;
                }

                h1 {
                    position: absolute;
                    top: 0;
                    margin: 0;
                    width: 100%;
                    left: 50%;
                    transform: translate(-50%,0);
                    font-family: Calibri, san-serif;
                    color: white;
                    font-size: 2.3vw;
                    text-shadow: -1px -1px 0 black, 1px -1px 0 black, -1px 1px 0 black, 1px 1px 0 black;
                }

                h2 {
                    position: absolute;
                    margin: 0;
                    padding: 2%;
                    width:22%;
                    top: 0;
                    right: -2%;
                    font-family: Calibri, san-serif;
                    color: white;
                    font-size: 1.5vw;
                    text-shadow: -1px -1px 0 black, 1px -1px 0 black, -1px 1px 0 black, 1px 1px 0 black;
                }

                h3 {
                    position: absolute;
                    margin: 0;
                    padding: 2%;
                    width:22%;
                    top: 2%;
                    left: -7%;
                    font-family: Calibri, san-serif;
                    color: white;
                    background-color:rgb(2, 0, 140);
                    font-size: 1.3vw;
                    text-shadow: -1px -1px 0 black, 1px -1px 0 black, -1px 1px 0 black, 1px 1px 0 black;
                    border: 1px solid rgb(230,230,230);
                    border-radius: 9px;
                }

                h4 {
                    margin: 0;
                    position: absolute;
                    top: 50%;
                }

                #poker-table {
                    position: absolute;
                    width: 74%;
                    top: 9%;
                    left: 50%;
                    transform: translate(-50%,0);
                }
                
                .avatars {
                    position: absolute;
                    width: 10%;
                }

                #male-face {

                    top: 60.5%;
                    left: 44.7%;
                }

                button:active {
                    transform: translateY(2px);
                }

                #female-face {
                    left: 44.7%;
                    top: 0;
                }

                #boy-1-face {
                    top: 6%;
                    left: 16%;
                }

                #boy-2-face {
                    top: 52%;
                    left: 77%;
                }

                #senior-happy-face {
                    top: 51%;
                    left: 13.3%;
                }

                #senior-angry-face {
                    top: 5%;
                    left: 73%;
                }

                #poker-chips-mine {
                    position: absolute;
                    width: 7%;
                    top: 52%;
                    left: 55%;
                    visibility: hidden;
                }

                #poker-chips-theirs {
                    position: absolute;
                    width: 7%;
                    top: 21%;
                    left: 64%;
                    visibility: hidden;
                }

                .cards {
                    position: absolute;
                    width: 4%;
                    -webkit-filter: drop-shadow(1px 1px 1px rgb(0,0,0,0.4));
                }

                #male-card-left {
                    top: -20%;
                    left: 46%;
                }

                #senior-happy-card-left {
                    top: -20%;
                    left: 23%;
                    transform: rotate(25deg)
                }

                #boy-1-card-left {
                    top: -20%;
                    left: 24%;
                    transform: rotate(-6deg);
                }
                
                #female-card-left {
                    top: -20%;
                    left: 46%;
                    transform: rotate(7deg);
                }

                #senior-angry-card-left {
                    top: -20%;
                    left: 71%;
                    transform: rotate(10deg)
                }

                #boy-2-card-left {
                    top: -20%;
                    left: 70%;
                    transform: rotate(-27deg)
                }

                #male-card-right {
                    top: -20%;
                    left: 50%;
                }

                #senior-happy-card-right {
                    top: -20%;
                    left: 25%;
                    transform: rotate(20deg)
                }

                #boy-1-card-right {
                    top: -20%;
                    left: 27%;
                }

                #female-card-right {
                    top: -20%;
                    left: 50%;
                }

                #senior-angry-card-right {
                    top: -20%;
                    left: 73%;
                    transform: rotate(20deg)
                }

                #boy-2-card-right {
                    top: -20%;
                    left: 73%;
                    transform: rotate(-25deg)
                }

                #money {
                    position: absolute;
                    bottom: 0;
                    left: 13%;
                    background-color: rgb(2, 0, 140);
                    border: 1px solid rgb(230,230,230);
                    box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
                    font-family: Calibri, san-serif;
                    width: 40%; 
                    height: 9.5%;
                    color: white;
                    font-size: 3.2vw;
                    border-radius: 15px;
                    text-align: center;
                    text-shadow: -1px -1px 0 black, 1px -1px 0 black, -1px 1px 0 black, 1px 1px 0 black;
                }
                .text-info {
                    font-size: 2vw;
                    color: white;
                    text-shadow: -1px -1px 0 black, 1px -1px 0 black, -1px 1px 0 black, 1px 1px 0 black;
                    font-family: Calibri, san-serif;
                }
                #action {
                    position: absolute;
                    top: 63%;
                    left: 24%;
                    opacity: 0;
                    text-align: right;
                    width: 20%;
                }

                #total-bet {
                    position: absolute;
                    top: 30%;
                    left: 35%;
                    width: 30%;
                    text-align: center;
                    visibility: hidden;
                }

                #my-bet {
                    position: absolute;
                    top: 53%;
                    left: 63%;
                    width: 30%;
                    text-align: left;
                    visibility: hidden;
                }

                #their-bet {
                    position: absolute;
                    top: 20%;
                    left: 34%;
                    width: 30%;
                    text-align: right;
                    visibility: hidden;
                }

                #win-or-loss {
                    position: absolute;
                    top: 44%;
                    left: 35%;
                    width: 30%;
                    text-align: center;
                    font-size: 3vw;
                    visibility: hidden;
                }

                button {
                    position: absolute;
                    border-radius: 15px;
                    font-size: 3vw;
                    font-family: calibri, san-serif;
                    text-align: auto;
                    background-color: rgb(0, 145, 202);
                    box-shadow: 0 8px 16px 0 rgba(0,0,0,0.4), 0 6px 20px 0 rgba(0,0,0,0.19);
                    color: white;
                    text-shadow: -1px -1px 0 black, 1px -1px 0 black, -1px 1px 0 black, 1px 1px 0 black;
                }

                button:hover {
                    background-color: rgb(0, 112, 156);
                }

                .nohover:hover {
                    background-color: rgb(0, 145, 202);
                }

                .upgrade-button-class {
                    font-size: 1.5vw;
                    border-radius: 5px;
                    top: 0;
                    left: 23%;
                    width: 52%;
                    padding: 1.6%;
                    margin: 0;
                }

                #play-button {
                    
                    bottom: 0;
                    right: 0;
                    width: 30%;
                    height: 15%;
                    
                }

                #higher-stakes {
                    bottom: 17%;
                    left: 10%;
                    height: 16%;
                    width: 45%;
                    border-bottom-left-radius: 0px;
                    border-bottom-right-radius: 0px;
                    font-size: 2.4vw;      
                }

                #lower-stakes {
                    bottom: 0;
                    left: 10%;
                    height: 16%;
                    width: 45%;
                    border-top-left-radius: 0px;
                    border-top-right-radius: 0px;
                    font-size: 2.4vw;
                }

                p {
                    position: absolute;
                    font-family: calibri, san-serif;
                    font-size: 2vw;
                    text-align: right;
                    text-align: bottom;
                    bottom: 0px;
                    right: 0;
                    color: white;
                    text-shadow: -1px -1px 0 black, 1px -1px 0 black, -1px 1px 0 black, 1px 1px 0 black;
                }

                .transform {
                    -webkit-transition: all 2s ease;  
                    -moz-transition: all 2s ease;  
                    -o-transition: all 2s ease;  
                    -ms-transition: all 2s ease;  
                    transition: all 2s ease;
                }

                .transform-active {
                    background-color: #45CEE0;
                }

            </style>
    </head>
    <body>
    <div id="left-frame">
        <img id="poker-table" src="https://www.sccpre.cat/mypng/full/321-3212694_poker-table-png-forgetmenot-online-poker-table-png.png" alt="poker-table">
        <img class= "avatars" id="male-face" src="https://i.ibb.co/MMKWVWP/avatar-adult-male-transparent.png" alt="male-face">
        <img class= "avatars" id="senior-happy-face" src="https://i.ibb.co/Vw5M7hS/avatar-senior-male-happy-transparent.png" alt="senior-happy-face">
        <img class= "avatars" id="boy-1-face" src="https://i.ibb.co/zHYyNmq/avatar-child-boy-transparent.png" alt="boy-1-face">
        <img class= "avatars" id="female-face" src="https://i.ibb.co/dJmgmnP/avatar-adult-woman-transparent.png" alt="female-face">
        <img class= "avatars" id="senior-angry-face" src="https://i.ibb.co/Pgs9f4Z/avatar-senior-male-grumpy-transparent.png" alt="senior-angry-face">
        <img class= "avatars" id="boy-2-face" src="https://i.ibb.co/wyj4nHF/avatar-child-boy-2-transparent.png" alt="boy-2-face">
        <img id="poker-chips-theirs" src="https://i.ibb.co/6vC2Gqj/poker-chips.png" alt="poker-chips">
        <img id="poker-chips-mine" src="https://i.ibb.co/6vC2Gqj/poker-chips.png" alt="poker-chips">
        <img class="cards player-card" id="male-card-left" src="https://i.ibb.co/B6fSHSL/card-back.png" alt="playing-card">
        <img class="cards" id="senior-happy-card-left" src="https://i.ibb.co/B6fSHSL/card-back.png" alt="playing-card">
        <img class="cards" id="boy-1-card-left" src="https://i.ibb.co/B6fSHSL/card-back.png" alt="playing-card">
        <img class="cards" id="female-card-left" src="https://i.ibb.co/B6fSHSL/card-back.png" alt="playing-card">
        <img class="cards" id="senior-angry-card-left" src="https://i.ibb.co/B6fSHSL/card-back.png" alt="playing-card">
        <img class="cards" id="boy-2-card-left" src="https://i.ibb.co/B6fSHSL/card-back.png" alt="playing-card">
        <img class="cards player-card" id="male-card-right" src="https://i.ibb.co/B6fSHSL/card-back.png" alt="playing-card">
        <img class="cards" id="senior-happy-card-right" src="https://i.ibb.co/B6fSHSL/card-back.png" alt="playing-card">
        <img class="cards" id="boy-1-card-right" src="https://i.ibb.co/B6fSHSL/card-back.png" alt="playing-card">
        <img class="cards" id="female-card-right" src="https://i.ibb.co/B6fSHSL/card-back.png" alt="playing-card">
        <img class="cards" id="senior-angry-card-right" src="https://i.ibb.co/B6fSHSL/card-back.png" alt="playing-card">
        <img class="cards" id="boy-2-card-right" src="https://i.ibb.co/B6fSHSL/card-back.png" alt="playing-card">
        <div class="text-info" id="action">Fold</div>
        <div class="text-info" id="total-bet">$500,000</div>
        <div class="text-info" id="my-bet">$250,000</div>
        <div class="text-info" id="their-bet">$250,000</div>
        <div class="text-info" id="win-or-loss">WIN</div>
        <div id="money"></div>

        <!-- play button -->
        <button id="play-button" type="button">Play a hand</button>
    </div>
    <div id="right-frame">
        
        <!-- play higher stakes button -->
        <button id="higher-stakes" type="button">Play higher stakes</button>
        <!-- play lower stakes button -->
        <button id="lower-stakes" type="button">Play lower stakes</button>
            <p>
                1bb / 100 hands <br><br>
                5 days, 3 hours <br>
                <br>
                <span id="debug">some text</span>
            </p>
            <div id="upgrades-container">
                <div class="each-upgrade transform" id="upgrade-heading">
                    <h1>
                        Pay for coaching
                    </h1>
                </div>
                <div class="each-upgrade" id="upgrade-1">
                    <h3>
                        $10,000,343
                    </h3>
                    <button class="upgrade-button-class" id="upgrade-1-button" type="button">Improve hand reading</button>
                    <h2>
                        Level 5
                    </h2>
                </div>
                <div class="each-upgrade" id="upgrade-2">
                    <h3>
                        $10,000,342
                    </h3>
                    <button class="upgrade-button-class" id="upgrade-2-button" type="button">Improve poker face</button>
                    <h2>
                            Level 3
                    </h2>
                </div>
                <div class="each-upgrade" id="upgrade-3">
                    <h3>
                        $10,000,234
                    </h3>
                    <button class="upgrade-button-class" id="upgrade-3-button" type="button">Lower variance play style</button>
                    <h2>
                            15 Variance
                    </h2>
                </div>
                <div class="each-upgrade" id="upgrade-4">
                    <h3>
                        $10,000,111
                    </h3>
                    <button class="upgrade-button-class" id="upgrade-4-button" type="button">Think faster</button>
                    <h2>
                            6 Seconds
                    </h2>
                </div>
                <div class="each-upgrade" id="upgrade-5">
                    <button class="upgrade-button-class" id="upgrade-5-button" type="button">Other</button>
                </div>
            </div>
    </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script>

            var cardDealtPosition = ["52%", "46%", "24%", "19%", "25%", "49%", "52%", "48%", "22%", "19%", "26%", "46%"]; // The vertical position of the cards from the top
            var bankroll = 30023400;
            var bankrollString = bankroll.toLocaleString("en");
            var dealSpeed = 125;    // Sets the speed of dealing the cards in milliseconds
            var howMuchToBet = 0;
            var dealCardsCount = 0;
            var headBobCount = 0;
            var stakes = 100;
            $("#money").text("$" + bankrollString);
            $("#debug").text("random text");
            $("#action").fadeOut(0).css("opacity", "1"); // set #action as 'fadeOut' and opacity back to 1
            
            var oneCard = $(".cards")[dealCardsCount];
            var $oneCard = $(oneCard);

            $("#play-button").mousedown(function() {
                $("#play-button").attr("disabled", true).addClass("nohover");
                howMuchToBet = Math.random();
                dealCardsCount = 0;
                dealCards();
                if (howMuchToBet < 0.2) {
                    $("#action").text("Fold")
                    .delay(2500)
                    .fadeIn(200, fold);
                }else if (howMuchToBet > 0.2 && howMuchToBet < 1) {
                    var betSize = 0.1 * stakes;
                    $("#action").text("Call")
                    .delay(2500)
                    .fadeIn(200, call);
                }
            });

            function dealCards() {
                $(".cards").fadeIn();
                oneCard = $(".cards")[dealCardsCount];
                $oneCard = $(oneCard);  // convert from DOM to jQuery variable
                $oneCard.animate({          // animate all the cards to fall down into their dealt positions
                    top: cardDealtPosition[dealCardsCount]
                }, dealSpeed, dealCards
                )
                dealCardsCount++;
            };
            
            function fold() {

                $(".player-card").delay(500).animate({
                    top: "40%"
                }, 300, fadeCards);
            }

            function fadeCards() {
                $(".cards").delay(500).fadeOut(500, function(){
                    for (k = 0; k < $(".cards").length; k++) {
                    oneCard = $(".cards")[k];
                    $oneCard = $(oneCard);  // convert from DOM to jQuery variable
                    $oneCard.css("top", "-20%");
                    }
                    k = 0;
                    $("#action").fadeOut(function(){
                        $("#play-button").attr("disabled", false).removeClass("nohover");
                    });
                }); 
                $("#poker-chips-mine").css("visibility", "hidden").fadeIn(0).css("top", "52%").css("left", "55%");
                $("#poker-chips-theirs").css("visibility", "hidden").fadeIn(0).css("top", "21%").css("left", "64%");
                $("#total-bet").css("visibility", "hidden").fadeIn(0).css("top", "30%").css("left", "35%");
                $("#my-bet").css("opacity", "1").css("visibility", "hidden").fadeIn(0).css("top", "53%").css("left", "63%");
                $("#their-bet").css("opacity", "1").css("visibility", "hidden").fadeIn(0).css("top", "20%").css("left", "34%");
                $("#win-or-loss").css("opacity", "1").css("visibility", "hidden").fadeIn(0);
            };

            function call(){
                $("#poker-chips-mine").css("visibility", "visible").animate({
                    top: "37%",
                    left: "49%"
                });
                $("#poker-chips-theirs").css("visibility", "visible").animate({
                    top: "37%",
                    left: "43%"
                });
                $("#my-bet").css("visibility", "visible").animate({
                    top: "38%",
                    left: "57%"
                }, function(){
                    $("#my-bet").delay(700).animate({
                        top: "30%",
                        left: "44%",
                        opacity: "0"
                    });
                });
                $("#their-bet").css("visibility", "visible").animate({
                    top: "38%",
                    left: "12%"
                }, function(){
                    $("#their-bet").delay(700).animate({
                        top: "30%",
                        left: "25%",
                        opacity: "0"
                    }, function(){
                        $("#total-bet").css("visibility", "visible").delay(2000, function (){
                            var headsOrTails = Math.random();
                            if(headsOrTails < 0.5) {
                                winAnimation();
                            }else {
                                lossAnimation();
                            }
                        });
                    });
                
            });
            };

            

            function winAnimation(){
                $("#win-or-loss").text("WIN").css("visibility", "visible").fadeOut(0).delay(700).fadeIn(winHeadAnimation).delay(700).fadeOut(function(){
                    $("#poker-chips-mine").animate({
                        top: "52%",
                        left: "55%"
                    });
                    $("#poker-chips-theirs").animate({
                        top: "52%",
                        left: "55%"
                    });
                    $("#total-bet").clearQueue().animate({
                        top: "45%",
                        left: "44%",
                    }, function(){
                        $("#total-bet").fadeOut();
                        $("#poker-chips-mine").fadeOut();
                        $("#poker-chips-theirs").fadeOut(fadeCards);
                    });
                    
                });
            };

            function lossAnimation(){
                $("#win-or-loss").text("LOSS").css("visibility", "visible").fadeOut(0).delay(700).fadeIn().delay(700).fadeOut(function(){
                    $("#poker-chips-mine").animate({
                        top: "21%",
                        left: "64%"
                    });
                    $("#poker-chips-theirs").animate({
                        top: "21%",
                        left: "64%"
                    });
                    $("#total-bet").clearQueue().animate({
                        top: "14%",
                        left: "50%",
                    }, function(){
                        $("#total-bet").fadeOut();
                        $("#poker-chips-mine").fadeOut();
                        $("#poker-chips-theirs").fadeOut(fadeCards);
                    });
                    
                });
            };

            function winHeadAnimation(){
                if (headBobCount < 14){
                    $("#male-face").animate({
                        top: "61.5%"
                    }, 100, function(){
                        headBobCount++
                        $("#male-face").animate({
                            top: "60.5%"
                        }, 100, winHeadAnimation);
                });
                }else {
                    headBobCount = 0;
                }
            }
        </script>
    </body>
</html>
